<!DOCTYPE html><html><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="content-language" content="en-us"/><meta name="msapplication-TileColor" content="#140635"/><meta name="theme-color" content="#140635"/><meta name="msapplication-config" content="none"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><meta name="twitter:card" content="summary"/><meta property="twitter:creator" content="@jschmitz97"/><script src="/avif.js"></script><script src="/hotjar.js"></script><link rel="canonical" href="https://avif.io/blog/tutorials/use-avif-in-css"/><title>avif.io | Fully support AVIF in your CSS today.</title><meta name="description" content="Learn how to boost your website by easily implementing the new AVIF image format in the `background-images` of your CSS."/><meta name="author" content="Justin Schmitz"/><meta property="og:site_name" content="AVIF Converter | avif.io ✨"/><meta property="og:url" content="https://avif.io/blog/tutorials/use-avif-in-css"/><meta property="og:title" content="avif.io | Fully support AVIF in your CSS today."/><meta property="og:description" content="Learn how to boost your website by easily implementing the new AVIF image format in the `background-images` of your CSS."/><meta property="og:image" content="https://avif.io/logo_draft.png"/><meta property="og:type" content="article"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://avif.io/blog/tutorials/use-avif-in-css"},"headline":"Fully support AVIF in your CSS today.","description":"Learn how to boost your website by easily implementing the new AVIF image format in the `background-images` of your CSS.","image":"/logo_draft.png","author":{"@type":"Person","name":"Justin Schmitz"},"publisher":{"@type":"Organization","name":"avif.io","logo":{"@type":"ImageObject","url":"https://avif.io/json-logo.png"}},"datePublished":"2020-10-01","dateModified":"2020-10-01","isFamilyFriendly":true,"inLanguage":"en-US"}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"blog","item":"https://avif.io/blog/"},{"@type":"ListItem","position":2,"name":"tutorials","item":"https://avif.io/blog/tutorials/"}]}</script><meta name="next-head-count" content="23"/><link rel="preload" href="/_next/static/css/ebb18c6358d5a07fdd42.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ebb18c6358d5a07fdd42.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-19718cbe439194860dfb.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-1935ea568526390e6a1b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.ae55bf7e6c20d673e3c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/d1ef8bb9d58003584f9960166e92dea0408d2b3d.555dd5b06eb6c282ac07.js" as="script"/><link rel="preload" href="/_next/static/chunks/d20cc2b087fa1e2d7cb56e8e9f09dfeeae021ec6.135e7cb5a320f1dfc6d0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-5a835892e6135e23a2fc.js" as="script"/><link rel="preload" href="/_next/static/chunks/efe3ab7e3167e7f844341c9cdd745f0085a9f410.d2b4f4ff2582e3a9acbd.js" as="script"/><link rel="preload" href="/_next/static/chunks/fa885ec72354f04094949dd19e0214399fd066fc.001039e629a89512bfde.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/tutorials/use-avif-in-css-0d366d80cf3a902a6d55.js" as="script"/></head><body><div id="__next"><header class="header"><div class="flex-center"><div style="display:inline-block"><a title="avif.io" href="/" rel="" target="" class="logo">avif.io</a></div><div style="display:inline-block"><a title="over 56640 files converted" href="/" rel="" target="" class="conversionscounter">over 56640 files converted</a></div></div><nav class="menu"><div style="display:inline-block"><a title="Support" href="https://www.buymeacoffee.com/justinschmitz" rel="" target="">Support</a></div><div style="display:inline-block"><a title="Blog" href="/blog/" rel="" target="">Blog</a></div><div style="display:inline-block"><a title="Convert" href="/" rel="" target="" class="button-primary">Convert</a></div></nav></header><div class="page"><main class="blog background2"><div class="blog__header overlay-after"><div class="blog__header__content"><div class="breadcrumbs"><div><div style="display:inline-block"><a title="blog" href="/blog/" rel="" target="" class="white">blog</a></div><div class="white inline"> &gt; <div style="display:inline-block"><a title="tutorials" href="/blog/tutorials/" rel="" target="" class="white">tutorials</a></div></div></div></div><h1>Fully support AVIF in your CSS today.</h1><div class="blog__meta white">01.10.20<!-- --> · <!-- -->8<!-- --> min read</div></div></div><div class="content__container"><div class="content">Serving AVIF images through HTML is very easy, as you can read<!-- --> <div style="display:inline-block"><a title="in this tutorial" href="/blog/tutorials/use-avif-in-html" rel="" target="">in this tutorial</a></div>. Furthermore, it is straightforward because HTML offers a media-type hint, which helps the browser deliver the best version of your image. Unfortunately, CSS does not have an option like this. However, with a simple Javascript function, we can easily support WebP and AVIF. We have created a detection script that manipulates your page&#x27;s HTML element by writing classes.<h2>How it works</h2>We have to remember that in CSS, the first rule doesn&#x27;t win. It&#x27;s the last rule that wins. We created a script that checks for AVIF and WebP support by loading an AVIF-encoded 1x1 pixel image. If the browser loads the AVIF image successfully, the <!-- -->&lt;html&gt;<!-- --> element will get an &#x27;avif&#x27; class. If the browser fails to load the AVIF image, the script will further check the browser&#x27;s support for WebP with the same method described above. If your browser successfully loads the image, the <!-- -->&lt;html&gt;<!-- --> gets a &#x27;webp&#x27; class. Of course, this feature is optionally and you can remove it based on your preferences. If very unlikely, your browser also fails this test, the HTML element gets no class at all.<div class="blog__syntax"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#1E1E1E;color:#DCDCDC"><code class="language-html" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="xml" style="color:#9B9B9B">&lt;</span><span class="xml" style="color:#569CD6">html</span><span class="xml" style="color:#9B9B9B">&gt;</span><span class="xml"> </span><span class="xml" style="color:#57A64A;font-style:italic">&lt;!--no class at all, which means you have to use jpg (oh god)--&gt;</span><span class="xml">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span><span class="xml"></span><span class="xml" style="color:#9B9B9B">&lt;</span><span class="xml" style="color:#569CD6">html</span><span class="xml" style="color:#9B9B9B"> </span><span class="xml" style="color:#9CDCFE">class</span><span class="xml" style="color:#9B9B9B">=</span><span class="xml" style="color:#D69D85">&quot;webp&quot;</span><span class="xml" style="color:#9B9B9B">&gt;</span><span class="xml"> </span><span class="xml" style="color:#57A64A;font-style:italic">&lt;!--which means you can use webp--&gt;</span><span class="xml">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">3</span><span class="xml"></span><span class="xml" style="color:#9B9B9B">&lt;</span><span class="xml" style="color:#569CD6">html</span><span class="xml" style="color:#9B9B9B"> </span><span class="xml" style="color:#9CDCFE">class</span><span class="xml" style="color:#9B9B9B">=</span><span class="xml" style="color:#D69D85">&quot;avif&quot;</span><span class="xml" style="color:#9B9B9B">&gt;</span><span class="xml"> </span><span class="xml" style="color:#57A64A;font-style:italic">&lt;!--which means you can use avif (heck yeah!)--&gt;</span></code></pre><button class="blog__syntax__copy"><span>Copy</span></button></div><h2>The Script</h2>To avoid visible image switching when the avif/webp class is added to your DOM, add the contents as an inline script in your <!-- -->&lt;head&gt;<!-- --> above any CSS content. The minified version of this script is a tiny 600 bytes piece and takes 5ms to load, which is completely fine for the benefit it provides.<div class="blog__syntax"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#1E1E1E;color:#DCDCDC"><code class="language-javascript" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#569CD6">function</span><span style="color:#DCDCDC"> </span><span style="color:#DCDCDC">AddClass</span><span style="color:#DCDCDC">(</span><span style="color:#569CD6">class</span><span style="color:#DCDCDC">) </span><span>{ </span><span style="color:#4EC9B0">document</span><span>.documentElement.classList.add(</span><span style="color:#569CD6">class</span><span style="color:#B8D7A3">) }</span><span>;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span><span></span><span style="color:#569CD6">var</span><span> avif = </span><span style="color:#569CD6">new</span><span> Image();
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">4</span><span>avif.src = </span><span style="color:#D69D85">&quot;data:image/avif;base64,AAAAFGZ0eXBhdmlmAAAAAG1pZjEAAACgbWV0YQAAAAAAAAAOcGl0bQAAAAAAAQAAAB5pbG9jAAAAAEQAAAEAAQAAAAEAAAC8AAAAGwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAARWlwcnAAAAAoaXBjbwAAABRpc3BlAAAAAAAAAAQAAAAEAAAADGF2MUOBAAAAAAAAFWlwbWEAAAAAAAAAAQABAgECAAAAI21kYXQSAAoIP8R8hAQ0BUAyDWeeUy0JG+QAACANEkA=&quot;</span><span>;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">5</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">6</span><span>avif.onload = </span><span style="color:#569CD6">function</span><span style="color:#DCDCDC"> (</span><span style="color:#DCDCDC">) </span><span>{ AddClass(</span><span style="color:#D69D85">&quot;avif&quot;</span><span>) };
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">7</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">8</span><span>avif.onerror = </span><span style="color:#569CD6">function</span><span style="color:#DCDCDC"> (</span><span style="color:#DCDCDC">) </span><span>{
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">9</span><span>  </span><span style="color:#569CD6">var</span><span> webp = </span><span style="color:#569CD6">new</span><span> Image();
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">10</span><span>  webp.src = </span><span style="color:#D69D85">&quot;data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==&quot;</span><span>;
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">11</span><span>  webp.onload = </span><span style="color:#569CD6">function</span><span style="color:#DCDCDC"> (</span><span style="color:#DCDCDC">) </span><span>{ AddClass(</span><span style="color:#D69D85">&quot;webp&quot;</span><span>) }
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">12</span>}
</code></pre><button class="blog__syntax__copy"><span>Copy</span></button></div>Minified version (600 Bytes):<div class="blog__syntax"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#1E1E1E;color:#DCDCDC"><code class="language-javascript" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#569CD6">function</span><span style="color:#DCDCDC"> </span><span style="color:#DCDCDC">F</span><span style="color:#DCDCDC">(</span><span style="color:#DCDCDC">a</span><span style="color:#DCDCDC">)</span><span>{</span><span style="color:#4EC9B0">document</span><span>.documentElement.classList.add(a)}</span><span style="color:#569CD6">var</span><span> A=</span><span style="color:#569CD6">new</span><span> Image;A.src=</span><span style="color:#D69D85">&quot;data:image/avif;base64,AAAAFGZ0eXBhdmlmAAAAAG1pZjEAAACgbWV0YQAAAAAAAAAOcGl0bQAAAAAAAQAAAB5pbG9jAAAAAEQAAAEAAQAAAAEAAAC8AAAAGwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAARWlwcnAAAAAoaXBjbwAAABRpc3BlAAAAAAAAAAQAAAAEAAAADGF2MUOBAAAAAAAAFWlwbWEAAAAAAAAAAQABAgECAAAAI21kYXQSAAoIP8R8hAQ0BUAyDWeeUy0JG+QAACANEkA=&quot;</span><span>,A.onload=</span><span style="color:#569CD6">function</span><span style="color:#DCDCDC">(</span><span style="color:#DCDCDC">)</span><span>{F(</span><span style="color:#D69D85">&quot;avif&quot;</span><span>)},A.onerror=</span><span style="color:#569CD6">function</span><span style="color:#DCDCDC">(</span><span style="color:#DCDCDC">)</span><span>{</span><span style="color:#569CD6">var</span><span> a=</span><span style="color:#569CD6">new</span><span> Image;a.src=</span><span style="color:#D69D85">&quot;data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==&quot;</span><span>,a.onload=</span><span style="color:#569CD6">function</span><span style="color:#DCDCDC">(</span><span style="color:#DCDCDC">)</span><span>{F(</span><span style="color:#D69D85">&quot;webp&quot;</span><span>)}};</span></code></pre><button class="blog__syntax__copy"><span>Copy</span></button></div>Minified version without WebP detection (400 Bytes):<div class="blog__syntax"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#1E1E1E;color:#DCDCDC"><code class="language-javascript" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#569CD6">var</span><span> A=</span><span style="color:#569CD6">new</span><span> Image;A.src=</span><span style="color:#D69D85">&quot;data:image/avif;base64,AAAAFGZ0eXBhdmlmAAAAAG1pZjEAAACgbWV0YQAAAAAAAAAOcGl0bQAAAAAAAQAAAB5pbG9jAAAAAEQAAAEAAQAAAAEAAAC8AAAAGwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAARWlwcnAAAAAoaXBjbwAAABRpc3BlAAAAAAAAAAQAAAAEAAAADGF2MUOBAAAAAAAAFWlwbWEAAAAAAAAAAQABAgECAAAAI21kYXQSAAoIP8R8hAQ0BUAyDWeeUy0JG+QAACANEkA=&quot;</span><span>,A.onload=</span><span style="color:#569CD6">function</span><span style="color:#DCDCDC">(</span><span style="color:#DCDCDC">)</span><span>{</span><span style="color:#4EC9B0">document</span><span>.documentElement.classList.add(</span><span style="color:#D69D85">&quot;avif&quot;</span><span>)};</span></code></pre><button class="blog__syntax__copy"><span>Copy</span></button></div><h2>Usage</h2>Once implemented, we can simply use the following CSS due to the high level classes.<div class="blog__syntax"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#1E1E1E;color:#DCDCDC"><code class="language-css" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#57A64A;font-style:italic">/* Simple approach */</span><span>
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span><span></span><span style="color:#D7BA7D">.img</span><span> { </span><span style="color:#9CDCFE">background-image</span><span>: </span><span style="color:#4EC9B0">url</span><span>(</span><span style="color:#D69D85">&#x27;avif-in-css.jpg&#x27;</span><span>) }
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span><span></span><span style="color:#D7BA7D">.webp</span><span> </span><span style="color:#D7BA7D">.img</span><span> { </span><span style="color:#9CDCFE">background-image</span><span>: </span><span style="color:#4EC9B0">url</span><span>(</span><span style="color:#D69D85">&#x27;avif-in-css.webp&#x27;</span><span>) }
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">4</span><span></span><span style="color:#D7BA7D">.avif</span><span> </span><span style="color:#D7BA7D">.img</span><span> { </span><span style="color:#9CDCFE">background-image</span><span>: </span><span style="color:#4EC9B0">url</span><span>(</span><span style="color:#D69D85">&#x27;avif-in-css.avif&#x27;</span><span>) }
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">5</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">6</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">7</span><span></span><span style="color:#57A64A;font-style:italic">/* Add Support for high Pixel Ratio Devices (Retina) */</span><span>
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">8</span><span></span><span style="color:#569CD6">@media</span><span>
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">9</span><span>    screen </span><span style="color:#569CD6">and</span><span> (</span><span style="color:#9CDCFE">min-resolution:</span><span> </span><span style="color:#B8D7A3">2dppx</span><span>),
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">10</span><span>    screen </span><span style="color:#569CD6">and</span><span> (</span><span style="color:#9CDCFE">-webkit-min-device-pixel-ratio:</span><span> </span><span style="color:#B8D7A3">2</span><span>),
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">11</span><span>    screen </span><span style="color:#569CD6">and</span><span> (</span><span style="color:#9CDCFE">min-resolution:</span><span> </span><span style="color:#B8D7A3">192dpi</span><span>) {
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">12</span><span>    </span><span style="color:#D7BA7D">.img</span><span> { </span><span style="color:#9CDCFE">background-image</span><span>: </span><span style="color:#4EC9B0">url</span><span>(</span><span style="color:#D69D85">&#x27;avif-in-css@2x.jpg&#x27;</span><span>) }
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">13</span><span>    </span><span style="color:#D7BA7D">.webp</span><span> </span><span style="color:#D7BA7D">.img</span><span> { </span><span style="color:#9CDCFE">background-image</span><span>: </span><span style="color:#4EC9B0">url</span><span>(</span><span style="color:#D69D85">&#x27;avif-in-css@2x.webp&#x27;</span><span>) }
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">14</span><span>    </span><span style="color:#D7BA7D">.avif</span><span> </span><span style="color:#D7BA7D">.img</span><span> { </span><span style="color:#9CDCFE">background-image</span><span>: </span><span style="color:#4EC9B0">url</span><span>(</span><span style="color:#D69D85">&#x27;avif-in-css@2x.avif&#x27;</span><span>) }
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">15</span>}
</code></pre><button class="blog__syntax__copy"><span>Copy</span></button></div><h2>The outcome (05.01.21)</h2>Using this script leads to the following screenshots. Back in the day, Firefox Quantum didn&#x27;t support WebP or AVIF, so there is no class. Chrome currently supports AVIF, so AVIF is displayed. Edge does not support AVIF and supports WebP, so our site has a webp class.<picture><img width="720" height="405" decoding="async" loading="lazy" src="/images/css-firefox.jpg" alt="firefox quantum without any class"/></picture><picture><img width="720" height="405" decoding="async" loading="lazy" src="/images/css-chrome.jpg" alt="our website on chrome gets an avif class"/></picture><picture><img width="720" height="405" decoding="async" loading="lazy" src="/images/css-edge.jpg" alt="microsoft edge with a webp class in the html element"/></picture><h2>SCSS background mixin</h2><div style="display:inline-block"><a title="Raoul Kramer" href="https://raoulkramer.de/avif-and-webp-images-as-css-background-images/" rel="" target="">Raoul Kramer</a></div> <!-- -->posted a f*king amazing SCSS background mixin that you can use as well to support AVIF and WebP.<div class="blog__syntax"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#1E1E1E;color:#DCDCDC"><code class="language-scss" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#569CD6">@mixin</span><span> bg-url(</span><span style="color:#BD63C5">$url</span><span>, </span><span style="color:#BD63C5">$url2x</span><span>: false, </span><span style="color:#BD63C5">$webp1x</span><span>: false, </span><span style="color:#BD63C5">$webp2x</span><span>: false, </span><span style="color:#BD63C5">$avif1x</span><span>: false, </span><span style="color:#BD63C5">$avif2x</span><span>: false) {
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span><span>  </span><span style="color:#9CDCFE">background-image</span><span>: url(</span><span style="color:#BD63C5">$url</span><span>);
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span><span>  </span><span style="color:#569CD6">@if</span><span> </span><span style="color:#BD63C5">$webp1x</span><span> { </span><span style="color:#D7BA7D">.webp</span><span> &amp; { </span><span style="color:#9CDCFE">background-image</span><span>: url(</span><span style="color:#BD63C5">$webp1x</span><span>) }}
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">4</span><span>  @if </span><span style="color:#BD63C5">$avif1x</span><span> { .avif &amp; { background-image: url(</span><span style="color:#BD63C5">$avif1x</span><span>) }}
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">5</span><span>  @if </span><span style="color:#BD63C5">$url2x</span><span> {
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">6</span>    @media
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">7</span><span>    screen and (-webkit-min-device-pixel-ratio: </span><span style="color:#B8D7A3">2</span><span>),
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">8</span><span>    screen and (min-resolution: </span><span style="color:#B8D7A3">192dpi</span><span>),
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">9</span><span>    screen and (min-resolution: </span><span style="color:#B8D7A3">2dppx</span><span>) {
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">10</span><span>      background-image: url(</span><span style="color:#BD63C5">$url2x</span><span>);
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">11</span><span>      </span><span style="color:#569CD6">@if</span><span> </span><span style="color:#BD63C5">$webp2x</span><span> {</span><span style="color:#D7BA7D">.webp</span><span> &amp; {</span><span style="color:#9CDCFE">background-image</span><span>: url(</span><span style="color:#BD63C5">$webp2x</span><span>)}}
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">12</span><span>      @if </span><span style="color:#BD63C5">$avif2x</span><span> {.avif &amp; {background-image: url(</span><span style="color:#BD63C5">$avif2x</span><span>)}}
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">13</span>    }
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">14</span>  }
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">15</span>}
</code></pre><button class="blog__syntax__copy"><span>Copy</span></button></div><h2>Look into the future</h2>The World Wide Web Consortium (W3C) is developing CSS Images Module Level 4 that will enable us to define the image type. The image-set property allows us to specify different image formats. The browser renders the first image format that is supported by the browser. The example below shows how type() can be used to serve multiple images in high-quality formats and older formats that are more widely supported. Note that the AVIF is shown first, since both images have the same resolution. The JPEG image coming second is automatically dropped in UAs which support AVIF images. However, older UAs ignore AVIF images (because it knows it doesn&#x27;t support &quot;image/avif&quot; files), and JPEG images will be selected instead.<div class="blog__syntax"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#1E1E1E;color:#DCDCDC"><code class="language-css" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#D7BA7D">background-image</span><span>:
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span><span>	</span><span style="color:#D7BA7D">image-set</span><span>(
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span><span>		&quot;</span><span style="color:#D7BA7D">zebra</span><span style="color:#D7BA7D">.avif</span><span>&quot; </span><span style="color:#D7BA7D">type</span><span>(&quot;</span><span style="color:#D7BA7D">image</span><span>/</span><span style="color:#D7BA7D">avif</span><span>&quot;),
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">4</span><span>		&quot;</span><span style="color:#D7BA7D">zebra</span><span style="color:#D7BA7D">.webp</span><span>&quot; </span><span style="color:#D7BA7D">type</span><span>(&quot;</span><span style="color:#D7BA7D">image</span><span>/</span><span style="color:#D7BA7D">webp</span><span>&quot;),
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">5</span><span>		&quot;</span><span style="color:#D7BA7D">zebra</span><span style="color:#D7BA7D">.png</span><span>&quot; </span><span style="color:#D7BA7D">type</span><span>(&quot;</span><span style="color:#D7BA7D">image</span><span>/</span><span style="color:#D7BA7D">png</span><span>&quot;)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">6</span>	);
</code></pre><button class="blog__syntax__copy"><span>Copy</span></button></div> <!-- -->Image-set is currently supported by 90% of browsers but does not support the type declaration yet. This is a brand new feature for CSS4. Until browsers support this feature, we have to use JavaScript to detect AVIF and WebP support.<h2>Generating AVIF images</h2>Creating AVIF files with <div style="display:inline-block"><a title="avif.io" href="/" rel="" target="">avif.io</a></div> is a nobrainer. Simply drag the files into the converter and it&#x27;ll do the rest. You&#x27;ll get the best results with the least time.<h2>One last hacky way by Marble_Wraith</h2>The reddit user marble_wraith found a hacky way to check for AVIF support. He states that the content-visibility CSS property launched in the same version of Chrome (85) and Opera (71) in which AVIF support has been added. So instead of detecting AVIF support directly, this solution checks for the browser version. However, as soon as other browsers like Safari add AVIF support, this method may stop working. We wouldn&#x27;t recommend this for a production website, but it&#x27;s something you can experiment with.<div class="blog__syntax"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#1E1E1E;color:#DCDCDC"><code class="language-css" style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span style="color:#569CD6">@supports</span><span> (</span><span style="color:#9CDCFE">content-visibility:</span><span>auto) {
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span><span>    </span><span style="color:#D7BA7D">.img</span><span> {</span><span style="color:#9CDCFE">background-image</span><span>: </span><span style="color:#4EC9B0">url</span><span>(</span><span style="color:#D69D85">&quot;image.avif&quot;</span><span>)}
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span>}
</code></pre><button class="blog__syntax__copy"><span>Copy</span></button></div><h2>Further optimization</h2>There are several more ways to optimize your images. Take a look at the referenced articles below.<h3>Sources</h3><div id="sources"><ol><li class="source"><a target="_blank" rel="noreferrer" href="https://caniuse.com/avif ">caniuse.com · avif </a></li><li class="source"><a target="_blank" rel="noreferrer" href="https://caniuse.com/css-image-set">caniuse.com · css-image-set</a></li><li class="source"><a target="_blank" rel="noreferrer" href="https://dev.to/nucliweb/detect-avif-image-support-to-use-in-your-css-4pen">dev.to · nucliweb · detect-avif-image-support-to-use-in-your-css-4pen</a></li><li class="source"><a target="_blank" rel="noreferrer" href="https://dev.to/nucliweb/detect-avif-image-support-to-use-in-your-css-4pen">dev.to · nucliweb · detect-avif-image-support-to-use-in-your-css-4pen</a></li><li class="source"><a target="_blank" rel="noreferrer" href="https://drafts.csswg.org/css-images-4">drafts.csswg.org · css-images-4</a></li><li class="source"><a target="_blank" rel="noreferrer" href="https://ghacks.net/2021/01/10/firefox-86-avif-support-enabled-by-default">ghacks.net · 2021 · 01 · 10 · firefox-86-avif-support-enabled-by-default</a></li><li class="source"><a target="_blank" rel="noreferrer" href="https://github.com/djpogo/avif-webp-css-support">github.com · djpogo · avif-webp-css-support</a></li><li class="source"><a target="_blank" rel="noreferrer" href="https://omgubuntu.co.uk/2021/01/firefox-86-avif-image-support">omgubuntu.co.uk · 2021 · 01 · firefox-86-avif-image-support</a></li><li class="source"><a target="_blank" rel="noreferrer" href="https://raoulkramer.de/avif-and-webp-images-as-css-background-images">raoulkramer.de · avif-and-webp-images-as-css-background-images</a></li></ol></div><section class="tags_container f0"><h3>Tags, Related Questions and Headlines</h3><div class="tag">(<!-- -->image format<!-- -->)</div><div class="tag">(<!-- -->squoosh<!-- -->)</div><div class="tag">(<!-- -->firefox<!-- -->)</div><div class="tag">(<!-- -->javascript<!-- -->)</div><div class="tag">(<!-- -->files<!-- -->)</div><div class="tag">(<!-- -->avif format<!-- -->)</div><div class="tag">(<!-- -->users<!-- -->)</div><div class="tag">(<!-- -->original image<!-- -->)</div><div class="tag">(<!-- -->decoders<!-- -->)</div><div class="tag">(<!-- -->devices<!-- -->)</div><div class="tag">(<!-- -->google<!-- -->)</div><div class="tag">(<!-- -->bytes<!-- -->)</div><div class="tag">(<!-- -->user experience<!-- -->)</div><div class="tag">(<!-- -->css background<!-- -->)</div><div class="tag">(<!-- -->github<!-- -->)</div><div class="tag">(<!-- -->background images<!-- -->)</div><div class="tag">(<!-- -->file size<!-- -->)</div><div class="tag">(<!-- -->people<!-- -->)</div><div class="tag">(<!-- -->file format<!-- -->)</div> <div class="question">(<!-- -->What is AVIF image format<!-- -->)</div><div class="question">(<!-- -->Is AVIF lossless<!-- -->)</div><div class="question">(<!-- -->Which image format can be displayed by all Web browsers<!-- -->)</div><div class="question">(<!-- -->What is a Web image<!-- -->)</div><div class="question">(<!-- -->How do I use an AVIF file<!-- -->)</div><div class="question">(<!-- -->Which image format is highest quality<!-- -->)</div><div class="question">(<!-- -->Progressively delivering new image formats with CSS<!-- -->)</div><div class="question">(<!-- -->My Blog Just Got Faster: AVIF Support<!-- -->)</div><div class="question">(<!-- -->PostCSS plugin to use AVIF in CSS background<!-- -->)</div><div class="question">(<!-- -->avif and webp images as css background images<!-- -->)</div><div class="question">(<!-- -->Delivering New Image Formats<!-- -->)</div><div class="question">(<!-- -->css background-image usage of avif and webp<!-- -->)</div></section></div></div></main><section class="posts"><h2>Related articles</h2><div class="posts__container grid"><div class="posts__item"><div class="posts__img"></div><div class="posts__data"><div class="posts__title">How to get started with AVIF using HTML</div><div>Enjoy this in-depth guide on how to use AVIF in HTML. Featuring examples with modern delivery standards.</div></div></div><div class="posts__item"><div class="posts__img"></div><div class="posts__data"><div class="posts__title">Use AVIF in Frameworks like Vue, React &amp; Angular</div><div>Serving AVIF images via JavaScript frameworks is quite easy - find out more here.</div></div></div><div class="posts__item"><div class="posts__img"></div><div class="posts__data"><div class="posts__title">Does Windows support AVIF already?</div><div>Learn how to make AVIF images load on native Windows 10 applications such as Paint and File Explorer.</div></div></div></div></section></div><div class="cta__container"><div class="cta overlay-before"><div class="cta__subtitle">Profit from a faster website, higher ranking and better conversions.</div><div class="cta__title text-60">Convert your images to AVIF for free.</div><div class="cta__blur overlay"></div></div></div><footer class="footer"><div id="footer-info"><div class="s2 f2"><b>avif.io</b></div><div class="s2 text-80">A tool by Justin Schmitz and Niksa Sporin that has already converted <!-- -->56640<!-- --> files.</div><div>© 2020 avif.io</div></div><div id="footer-more"><div class="s1"><b>More</b></div><div><a title="Blog" href="/blog" rel="" target="">Blog</a></div><div><a title="Contact" href="mailto:support@avif.io" rel="" target="">Contact</a></div><div><a title="Donate" href="https://www.buymeacoffee.com/justinschmitz" rel="" target="">Donate</a></div><div><a title="Sitemap" href="/sitemap.xml" rel="" target="">Sitemap</a></div><div><a title="Legal &amp; Privacy" href="/privacy-policy" rel="" target="">Legal &amp; Privacy</a></div></div><div id="communication"><a class="producthunt" href="https://www.producthunt.com/posts/avif-io-avif-image-converter?utm_source=badge-featured&amp;utm_medium=badge&amp;utm_souce=badge-avif-io-avif-image-converter" target="_blank" rel="noreferrer"><img src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=273434&amp;theme=dark" alt="Fastest AVIF image converter, featured on Product Hunt" style="width:250px;height:54px" width="250" height="54"/></a><a class="discord white" href="https://discord.gg/6w42YpF5hm" target="_blank" rel="noreferrer">Talk to us on Discord!</a></div></footer><div class="cookie false">We use cookies to deliver our services. By using our website you agree with the<!-- --> <div style="display:inline-block"><a title="Policy" href="/privacy-policy" rel="" target="">Policy</a></div>.<div role="button" class="overlay flex-center" tabindex="0">Close</div></div><address class="share-container"><div style="display:inline-block"><a title="Share on Twitter" href="https://twitter.com/intent/tweet?source=https://avif.io/blog/tutorials/use-avif-in-css&amp;text=https://avif.io/blog/tutorials/use-avif-in-css" rel="" target="" id="twitter" aria-label="Share on Twitter"></a></div><div style="display:inline-block"><a title="Share on Reddit" href="https://www.reddit.com/submit?url=https://avif.io/blog/tutorials/use-avif-in-css" rel="" target="" id="reddit" aria-label="Share on Reddit"></a></div><div style="display:inline-block"><a title="Share on Facebook" href="https://www.facebook.com/share.php?u=https://avif.io/blog/tutorials/use-avif-in-css" rel="" target="" id="facebook" aria-label="Share on Facebook"></a></div><div><a role="button" aria-label="share" tabindex="99" id="share"></a></div></address><script src="/__/firebase/8.2.2/firebase-app.js"></script><script src="/__/firebase/8.2.2/firebase-analytics.js"></script><script src="/__/firebase/init.js"></script><script>firebase.analytics();</script></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/tutorials/use-avif-in-css","query":{},"buildId":"_1C_3Zoeo9ktN132umLZj","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/chunks/polyfills-258b42e5eecc223c2582.js"></script><script src="/_next/static/chunks/main-19718cbe439194860dfb.js" async=""></script><script src="/_next/static/chunks/webpack-1935ea568526390e6a1b.js" async=""></script><script src="/_next/static/chunks/framework.ae55bf7e6c20d673e3c3.js" async=""></script><script src="/_next/static/chunks/d1ef8bb9d58003584f9960166e92dea0408d2b3d.555dd5b06eb6c282ac07.js" async=""></script><script src="/_next/static/chunks/d20cc2b087fa1e2d7cb56e8e9f09dfeeae021ec6.135e7cb5a320f1dfc6d0.js" async=""></script><script src="/_next/static/chunks/pages/_app-5a835892e6135e23a2fc.js" async=""></script><script src="/_next/static/chunks/efe3ab7e3167e7f844341c9cdd745f0085a9f410.d2b4f4ff2582e3a9acbd.js" async=""></script><script src="/_next/static/chunks/fa885ec72354f04094949dd19e0214399fd066fc.001039e629a89512bfde.js" async=""></script><script src="/_next/static/chunks/pages/blog/tutorials/use-avif-in-css-0d366d80cf3a902a6d55.js" async=""></script><script src="/_next/static/_1C_3Zoeo9ktN132umLZj/_buildManifest.js" async=""></script><script src="/_next/static/_1C_3Zoeo9ktN132umLZj/_ssgManifest.js" async=""></script></body></html>